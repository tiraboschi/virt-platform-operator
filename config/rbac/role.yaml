# AUTO-GENERATED by 'make generate-rbac'
# DO NOT EDIT MANUALLY - your changes will be overwritten
# To modify RBAC:
#   1. Add/remove assets in assets/ directory
#   2. Run 'make generate-rbac'
#   3. Commit the updated config/rbac/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: virt-platform-operator-role
rules:
  # ========================================
  # Operator Infrastructure (Static)
  # ========================================
  # Nodes (for hardware detection)
  - apiGroups:
      - ""
    resources:
      - nodes
    verbs:
      - get
      - list
      - watch
  # Events (for observability - legacy core/v1 API)
  - apiGroups:
      - ""
    resources:
      - events
    verbs:
      - create
      - patch
  # Events (for observability - modern events.k8s.io/v1 API)
  - apiGroups:
      - events.k8s.io
    resources:
      - events
    verbs:
      - create
      - patch
  # Leader Election
  - apiGroups:
      - coordination.k8s.io
    resources:
      - leases
    verbs:
      - create
      - delete
      - get
      - list
      - patch
      - update
      - watch
  # CRD Discovery (for soft dependency detection)
  - apiGroups:
      - apiextensions.k8s.io
    resources:
      - customresourcedefinitions
    verbs:
      - get
      - list
      - watch
  # ========================================
  # Managed Resources (Dynamic - from assets/)
  # ========================================
  # Migration Toolkit for Virtualization (MTV)
  - apiGroups:
      - forklift.konveyor.io
    resources:
      - forkliftcontrollers
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  # HyperConverged
  - apiGroups:
      - hco.kubevirt.io
    resources:
      - hyperconvergeds
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  # MachineConfig & KubeletConfig
  - apiGroups:
      - machineconfiguration.openshift.io
    resources:
      - kubeletconfigs
      - machineconfigs
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  # MetalLB
  - apiGroups:
      - metallb.io
    resources:
      - metallbs
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  # Cluster Observability
  - apiGroups:
      - observability.openshift.io
    resources:
      - uiplugins
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
  # NodeHealthCheck
  - apiGroups:
      - remediation.medik8s.io
    resources:
      - nodehealthchecks
    verbs:
      - create
      - get
      - list
      - patch
      - update
      - watch
